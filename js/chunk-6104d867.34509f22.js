(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6104d867"],{"669d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"编辑资料","right-text":"保存"},on:{"click-left":function(t){return e.$router.back()},"click-right":e.saveUser}}),n("van-cell-group",[n("van-cell",{attrs:{"is-link":"",title:"头像",center:""}},[n("van-image",{attrs:{slot:"default",width:"1.5rem",height:"1.5rem",fit:"cover",round:"",src:e.user.photo},on:{click:function(t){e.showPhoto=!0}},slot:"default"})],1),n("van-cell",{attrs:{"is-link":"",title:"名称",value:e.user.name},on:{click:function(t){e.showName=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"性别",value:0===e.user.gender?"男":"女"},on:{click:function(t){e.showGender=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"生日",value:e.user.birthday},on:{click:e.showDate}})],1),n("van-popup",{staticStyle:{width:"80%"},model:{value:e.showPhoto,callback:function(t){e.showPhoto=t},expression:"showPhoto"}},[n("van-cell",{attrs:{"is-link":"",title:"本地相册选择图片"},on:{click:e.openFileDialog}}),n("van-cell",{attrs:{"is-link":"",title:"拍照"}})],1),n("van-popup",{staticStyle:{width:"80%"},attrs:{"close-on-click-overlay":!1},model:{value:e.showName,callback:function(t){e.showName=t},expression:"showName"}},[n("van-field",{attrs:{"error-message":e.nameMsg,type:"textarea",rows:"4"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),n("van-button",{attrs:{type:"info",size:"large",block:""},on:{click:e.btnName}},[e._v("确定")])],1),n("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消"},on:{select:e.selectItem},model:{value:e.showGender,callback:function(t){e.showGender=t},expression:"showGender"}}),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showBirthDay,callback:function(t){e.showBirthDay=t},expression:"showBirthDay"}},[n("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate,"max-date":e.maxDate},on:{cancel:function(t){e.showBirthDay=!1},confirm:e.confirmDate},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),n("input",{ref:"myFile",staticStyle:{display:"none"},attrs:{type:"file",name:"",id:""},on:{change:e.upload}})],1)},a=[],o=(n("b0c0"),n("96cf"),n("1da1")),i=n("c24f"),s=n("5a0c"),c=n.n(s),u={data:function(){return{showPhoto:!1,showName:!1,showGender:!1,showBirthDay:!1,minDate:new Date(1900,1,1),maxDate:new Date,currentDate:new Date,actions:[{name:"男"},{name:"女"}],nameMsg:"",user:{name:"",gender:1,birthday:"1999-4-9",photo:""}}},methods:{saveUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["e"])(e.user);case 3:e.$notify({type:"success",message:"保存成功",duration:800}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$notify({message:"保存失败",duration:800});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},upload:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("photo",t.$refs.myFile.files[0]),e.next=4,Object(i["g"])(n);case 4:r=e.sent,t.showPhoto=!1,t.user.photo=r.photo;case 7:case"end":return e.stop()}}),e)})))()},openFileDialog:function(){this.$refs.myFile.click()},getUserprofile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])();case 2:e.user=t.sent;case 3:case"end":return t.stop()}}),t)})))()},btnName:function(){this.user.name.length<1||this.user.name.length>7?this.nameMsg="用户昵称的长度应该是1-7的长度要求":(this.nameMsg="",this.showName=!1)},selectItem:function(e,t){this.user.gender=t,this.showGender=!1},showDate:function(){this.showBirthDay=!0,this.currentDate=new Date(this.user.birthday)},confirmDate:function(){this.user.birthday=c()(this.currentDate).format("YYYY-MM-DD"),this.showBirthDay=!1}},created:function(){this.getUserprofile()}},l=u,h=n("2877"),f=Object(h["a"])(l,r,a,!1,null,null,null);t["default"]=f.exports},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";!r||c in o||a(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return h}));var r=n("5530"),a=n("b775");function o(e){return Object(a["a"])({url:"/authorizations",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/user/followings",data:e,method:"post"})}function s(e){return Object(a["a"])({url:"/user/followings/".concat(e),method:"DELETE"})}function c(){return Object(a["a"])({url:"/user"})}function u(){return Object(a["a"])({url:"/user/profile"})}function l(e){return Object(a["a"])({url:"/user/photo",data:e,method:"patch"})}function h(e){return Object(a["a"])({url:"/user/profile",method:"patch",data:Object(r["a"])({},e,{photo:null})})}}}]);
//# sourceMappingURL=chunk-6104d867.34509f22.js.map